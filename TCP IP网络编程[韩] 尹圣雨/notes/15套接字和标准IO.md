c语言标准I/O函数的两个优点

将标准I/O函数用于数据通信并非难事。但仅掌握函数使用方法并没有太大意义，至少应该了解这些函数具有的优点。下面列出的是标准I/O函数的两大优点。

* **标准I/O函数具有良好的移植性(Portability )**
* **标准I/O函数可以利用缓冲提高性能。**



1、所有标准函数具有良好的移植性。因为，为了支持所有操作系统(编译器)，这些函数都是按照ANSIC标准定义的。当然，这并不局限于网络编程，而是适用于所有编程领域。



2、创建套接字时，操作系统将生成用于I/O的缓冲。此缓冲在执行TCP协议吋发挥着非常重要的作用。此时若使用标准I/O函数，将得到额外的另一缓冲的支持，如图所示。

![image-20210120171018726](C:\Users\55018\AppData\Roaming\Typora\typora-user-images\image-20210120171018726.png)

使用标准I/O函数传输数据时，经过2个缓冲。例如，通过fputs函数传输字符串“Hello”时，首先将数据传递到标准I/O函数的缓冲。然后数据将移动到套接字输出缓冲，最后将字符串发送到对方主机。

标准I/O函数缓冲的主要目的是为了提高性能，但套接字中的缓冲主要是为了实现TCP协议而设立的。



标准I/O函数的几个缺点


* 不容易进行双向通信。
* 有时可能频繁调用ffiush函数。
* 需要以FILE结构体指针的形式返回文件描述符。



但因为缓冲的缘故，每次切换读写工作状态吋应调用fflush函数。

而创建套接字时默认返回文件描述符，因此需要将文件描述符转化为FILE指针

**利用fdopen函数转换为FILE结构体指针**

```c
#include<stdio.h>

FILE* fdopen(int fildes,const char* mode);

```

fildes:需要转换的文件描述符。
mode: 将要创建的FILE结构体指针的模式（mode ）信息。与fopen函数中的打开模式相同。常用的参数有读模式“r”和写模式“w”。



**利用 fileno函数转换为文件描述符**

与fdopen函数提供相反功能的函数

```c
#include<stdio.h>
int fileno(FILE* stream);

```

向该函数传递nLE指针参数时返回相应文件描述符。